<div class="layout">
  <main class="main-content">
    <h2>Escreva um post</h2>
    <div class="form-postagem">
      <label for="usuarioSelect"><b>Escolha o usu치rio:</b></label>
      <select id="usuarioSelect" [(ngModel)]="usuarioSelecionado" [ngModelOptions]="{standalone: true}">
        <option *ngFor="let usuario of usuarios" [ngValue]="usuario">{{ usuario.nome }}</option>
      </select>

      <textarea [(ngModel)]="textoPostagem" placeholder="O que voc칡 est치 pensando?"></textarea>
      <button (click)="publicarPost()">Publicar</button>
    </div>

    <div *ngFor="let postagem of listaPostagens" class="post">
      <p><strong>{{ postagem.autor?.nome }}</strong></p>
      <p><strong>Mensagem:</strong> {{ postagem.texto }}</p>
      <button (click)="toggleLike(postagem)">
        <span *ngIf="isLikedByUser(postagem)">游눜 Descurtir</span>
        <span *ngIf="!isLikedByUser(postagem)">游밼 Curtir</span>
      </button>
      <span>{{ postagem.curtidas.length }} curtida{{ postagem.curtidas.length === 1 ? '' : 's' }}</span>
      <button (click)="toggleComentarios(postagem)">Coment치rios</button>
      <div *ngIf="comentariosAbertos[postagem.id]" class="comentarios-area">
        <div *ngIf="postagem.comentarios?.length; else semComentarios">
          <div *ngFor="let comentario of postagem.comentarios">
            <b>{{ comentario.usuario?.nome || 'An칪nimo' }}:</b> {{ comentario.texto }}
          </div>
        </div>
        <ng-template #semComentarios><i>Sem coment치rios ainda.</i></ng-template>
        <div class="novo-comentario">
          <input [(ngModel)]="novoComentario[postagem.id]" placeholder="Digite um coment치rio..." [ngModelOptions]="{standalone: true}" />
          <button (click)="adicionarComentario(postagem)">Comentar</button>
        </div>
      </div>
    </div>
  </main>
</div>
